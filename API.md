# AnoBBS Api信息（此文档为A岛官方API）

------

## 一些提示

以下所有的API都有两种方式可调用 
[http://api?key=value&key2=value2](http://api/?key=value&key2=value2) 
以及 
[http://api/key/value/key2/value](http://api/key/value/key2/value)

同时所有的API调用都应该有一个appid跟在最后 
User-Agent必须为HavfunClient-平台

## 获取饼干

/Api/getCookie

返回

| key  | value    | 说明                                   |
| ---- | -------- | ------------------------------------ |
| 空    | ok/error | 若发放cookie成功，则自动写入cookie并返回ok，否则error |

## 主系统信息

关于一些主系统的API

### 1、获取板块列表

/Api/getForumList

由于返回的是Json，这里直接给实例

```
[
    {
        "id": "4",
        "sort": "1",
        "name": "综合",
        "status": "n",
        "forums": [
            {
                "id": "4",
                "fgroup": "4",
                "sort": "1",
                "name": "综合版1",
                "showName": "",
                "msg": "msg",
                "interval": "15",
                "createdAt": "2011-10-21 15:49:28",
                "updateAt": "2015-06-23 17:26:28",
                "status": "n"
            },
            {
                "id": "20",
                "fgroup": "4",
                "sort": "2",
                "name": "欢乐恶搞",
                "showName": "",
                "msg": "msg",
                "interval": "15",
                "createdAt": "2011-10-21 15:48:43",
                "updateAt": "2014-11-05 00:27:52",
                "status": "n"
            },
            {
                "id": "11",
                "fgroup": "4",
                "sort": "3",
                "name": "推理",
                "showName": "",
                "msg": "•微小说、图片推理、解谜。<br/>•本版发文间隔为15秒。",
                "interval": "15",
                "createdAt": "2011-10-29 16:38:23",
                "updateAt": "2014-08-02 04:54:09",
                "status": "n"
            }
        ]
    }
]

```

这里针对返回值做一下解释 
第一层JsonArray中的Object为分组，具体信息如下

| key    | 说明                        |
| ------ | ------------------------- |
| id     | 该板块组的ID                   |
| sort   | 服务器的排序值，越小优先级越高，若为-1则自动排序 |
| name   | 这个就不用说了吧*(:з」∠)*          |
| forums | 这里是在本组的forum              |

forumObj信息

| key      | 说明                          |
| -------- | --------------------------- |
| id       | 额。。                         |
| fgroup   | 所属组的id                      |
| sort     | 跟上面一样                       |
| name     | 版块名称                        |
| showName | 板块显示的名字，若该值不为空则显示该值(包含html) |
| interval | 该板块的发言间隔时间                  |
| status   | 始终为n                        |

### 2、获取板块串

/Api/showf 
输入:

| key  | 说明      |
| ---- | ------- |
| id   | 获取板块的id |
| page | 分页      |

提示: 两个值都不能为空

返回:

```
[
    {
        "id": "787826",
        "img": "",
        "ext": "",
        "now": "2013-05-06(一)11:03:58",
        "userid": "Wq2wRi8p",
        "name": "无名氏",
        "email": "",
        "title": "无标题",
        "content": "询问版没人...<br/>买部平板看漫画和PDF实际不？不玩游戏，国产平板可靠么？多少寸合适？其实我主要是要续航能力",
        "admin": "0",
        "replyCount": "5",
        "replys": [
            {
                "id": "788581",
                "img": "2015-08-12/55cab9bb5f12a",
                "ext": ".jpg",
                "now": "2013-05-06(一)14:39:33",
                "userid": "FbYx5Cbe",
                "name": "无名氏",
                "email": "",
                "title": "无标题",
                "content": "<font color=\"#789922\">>787826</font><br/>国产的续航都不行，，你肥皂掉了",
                "admin": "0"
            }
        ]
    }
]

```

| key        | 说明                          |
| ---------- | --------------------------- |
| id         | 该串的id                       |
| img        | 该串的图片相对地址                   |
| ext        | 该串图片的后缀                     |
| now        | 该串的可视化发言时间                  |
| userid     | 该串的饼干                       |
| name       | 你懂得                         |
| email      | 你懂得                         |
| title      | 你还是懂的*(:з」∠)*               |
| content    | ....这个你也懂                   |
| replyCount | 总共有多少个回复                    |
| admin      | 是否是酷炫红名，如果是酷炫红名则userid为红名id |
| replys     | 主页展示回复的帖子                   |

小提示 
\1. image的缩略图地址为 [http://cdnpath/thumb/ext](http://cdnpath/thumb/$img%20+%20$ext) 
\2. image的真实地址为 [http://cdnpath/image/ext](http://cdnpath/image/$img%20+%20$ext) 
\3. image的cdnpath自己上页面上扒*(:з」∠)* 
\4. replys对象的相关信息和上面相似。。你们也应该懂得。。累屎了 
\5. 噢，要凑够六条才行→_→（强迫症） 
\6. 还有一条，可以通过img是否为空来判断是否有图片

### 3、获取串内容

/Api/thread 
输入:

| key  | 说明   |
| ---- | ---- |
| id   | 串的id |
| page | 分页   |

提示: 同样两个都不能为空

返回:

```
{
    "id": "6467841",
    "img": "",
    "ext": "",
    "now": "2015-08-12(三)16:08:00",
    "userid": "F0zz1FP",
    "name": "无名氏",
    "email": "",
    "title": "无标题",
    "content": "尼玛本来我如果说个好的,知道了.这个运维工作就到手了,我多了几句嘴,然后对方就我说的提了几个问题我半天答不上来,结果到手的offer飞了.尼玛,真够郁闷的(;´Д`)",
    "admin": "0",
    "replyCount": "7",
    "replys": [
        {
            "id": "6467854",
            "img": "",
            "ext": "",
            "now": "2015-08-12(三)16:13:05",
            "userid": "30ru124",
            "name": "无名氏",
            "email": "",
            "title": "无标题",
            "content": "嘴欠得肥宅",
            "admin": "0"
        }
    ]
}

```

关于Thread Obj

| key        | 说明                          |
| ---------- | --------------------------- |
| id         | 该串的id                       |
| img        | 该串的图片相对地址                   |
| ext        | 该串图片的后缀                     |
| now        | 该串的可视化发言时间                  |
| userid     | 该串的饼干                       |
| name       | 你懂得                         |
| email      | 你懂得                         |
| title      | 你还是懂的*(:з」∠)*               |
| content    | ....这个你也懂                   |
| replyCount | 总共有多少个回复                    |
| admin      | 是否是酷炫红名，如果是酷炫红名则userid为红名id |
| replys     | 主页展示回复的帖子                   |

→_→ 我不会告诉你这是从上面复制过来的，小提示也跟上面一样也

### 5、发表新串

额。。这个嘛，你直接抓前端的form用就好啦~ 
(诶嘿，偷懒大法好)

## 订阅系统

### 1、查询订阅

/Api/feed 
输入:

| key  | 说明                                  |
| ---- | ----------------------------------- |
| uuid | 这个为手机的uuid，或者自定义的一些识别用户的方法，用来识别某个用户 |
| page | 分页                                  |

返回:

```
[
    {
        "id": "6460798",
        "fid": "4",
        "category": "",
        "img": "",
        "ext": "",
        "now": "2015-08-10(一)02:04:49",
        "userid": "crGIPK87",
        "name": "无名氏",
        "email": "",
        "title": "无标题",
        "content": "我现在身边睡着一个全裸的伪娘。。。我的心情很复杂<br>",
        "status": "n",
        "admin": "0"
    }
]

```

具体信息参阅前面的啦~好累啊*(:з」∠)*懒死了

### 2、增加订阅

/Api/addFeed 
输入

| key  | 说明                                  |
| ---- | ----------------------------------- |
| uuid | 这个为手机的uuid，或者自定义的一些识别用户的方法，用来识别某个用户 |
| tid  | 需要订阅的串id                            |

返回

| key  | 说明                                    |
| ---- | ------------------------------------- |
| 并没有  | 如果成功返回 "订阅大成功→_→" 出错或者其他原因返回 "该主题不存在" |

### 3、删除订阅

/Api/delFeed 
提交:

| key  | 说明                                  |
| ---- | ----------------------------------- |
| uuid | 这个为手机的uuid，或者自定义的一些识别用户的方法，用来识别某个用户 |
| tid  | 需要订阅的串id                            |

返回:

| key  | 说明                            |
| ---- | ----------------------------- |
| 并没有  | 如果成功返回 "取消订阅成功!" 出错或者其他原因返回原因 |